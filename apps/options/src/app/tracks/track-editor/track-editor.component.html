<div class="modal is-active">
  <div class="modal-background" (click)="onCancel()"></div>
  <form class="modal-card" [formGroup]="trackForm" (submit)="onSave($event)">
    <header class="modal-card-head">
      <p class="modal-card-title">Track Editor</p>
    </header>
    <section class="modal-card-body">
      <div class="section">
        <fieldset>
          <div class="field" *ngIf="trackForm.controls.title as control">
            <label class="label">Track Title</label>
            <div class="control">
              <input
                formControlName="title"
                class="input"
                [ngClass]="{
                  'is-danger': control.invalid
                }"
                type="text"
                placeholder="The Shunning Riff"
              />
            </div>
            <p class="help is-danger" *ngIf="control.invalid">
              Please provide a title for this track.
            </p>
          </div>

          <div class="field" *ngIf="trackForm.controls.for as control">
            <label class="label">Track is For</label>
            <div class="control">
              <input
                formControlName="for"
                class="input"
                [ngClass]="{
                  'is-danger': control.invalid
                }"
                type="text"
                placeholder="The Shining"
              />
            </div>
          </div>

          <div class="field" *ngIf="trackForm.controls.authors as control">
            <label class="label">Track Author(s)</label>
            <div class="control">
              <input
                formControlName="authors"
                class="input"
                [ngClass]="{
                  'is-danger': control.invalid
                }"
                type="text"
                placeholder="Steven King"
              />
            </div>
          </div>

          <div class="field" *ngIf="trackForm.controls.language as control">
            <label class="label">Language</label>
            <div class="control">
              <input
                formControlName="language"
                class="input"
                [ngClass]="{
                  'is-danger': control.invalid
                }"
                type="text"
                placeholder="en"
              />
            </div>
          </div>

          <div class="field" *ngIf="trackForm.controls.license as control">
            <label class="label">License</label>
            <div class="control">
              <input
                formControlName="license"
                class="input"
                [ngClass]="{
                  'is-danger': control.invalid
                }"
                type="text"
                placeholder="CC-BY-SA"
              />
            </div>
          </div>

          <div class="field" *ngIf="trackForm.controls.url as control">
            <label class="label">Track Homepage</label>
            <div class="control">
              <input
                formControlName="url"
                class="input"
                [ngClass]="{
                  'is-danger': control.invalid
                }"
                type="url"
                placeholder="https://plopdown.video"
              />
            </div>
          </div>

          <div class="field" *ngIf="trackForm.controls.thumbnail as control">
            <label class="label">Thumbnail</label>
            <div class="control">
              <div class="file has-name is-fullwidth">
                <label class="file-label">
                  <input
                    class="file-input"
                    type="file"
                    accept=".png,image/png"
                    (change)="setThumbnail($event)"
                  />
                  <span class="file-cta">
                    <span class="file-icon">
                      <plopdown-icon [path]="mdiFileUpload"></plopdown-icon>
                    </span>
                    <span class="file-label">
                      Choose a fileâ€¦
                    </span>
                  </span>
                  <span class="file-name">
                    {{ control.value || 'No Thumbnail' }}
                  </span>
                </label>
              </div>
            </div>
          </div>
        </fieldset>
      </div>
    </section>
    <footer class="modal-card-foot buttons is-right">
      <button type="button" class="button" (click)="onCancel()">Cancel</button>
      <button
        type="submit"
        [disabled]="trackForm.invalid"
        class="button is-primary is-pulled-right"
      >
        {{ trackForm.value['_id'] ? 'Save Track' : 'Add Track' }}
      </button>
    </footer>
  </form>
</div>
