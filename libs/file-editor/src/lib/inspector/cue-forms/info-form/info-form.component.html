<div [formGroup]="templateGroup">
  <div class="field" *ngIf="templateGroup.controls.title as control">
    <label for="cue_data_title" class="label is-small">Title</label>
    <div class="control">
      <input
        id="cue_data_title"
        [formControl]="$any(control)"
        [ngClass]="{ 'is-danger': control.invalid }"
        class="input is-small"
        type="text"
      />
    </div>
    <p class="help is-danger" *ngIf="control.errors?.required">
      You need to specify the title.
    </p>
  </div>
  <div class="field">
    <label for="cue_data_url" class="label is-small">URL</label>
    <div class="control">
      <input
        id="cue_data_url"
        formControlName="url"
        class="input is-small"
        type="text"
      />
    </div>
  </div>
  <ng-container *ngIf="templateGroup.controls.authors as array">
    <div
      class="card"
      *ngFor="let author of $any(array).controls; let i = index"
    >
      <header class="card-header">
        <p class="card-header-title">Author #{{ i + 1 }}</p>
      </header>
      <div class="card-content">
        <div class="field">
          <label [for]="'cue_data_footnote_' + i" class="label is-small"
            >Name</label
          >
          <div class="control">
            <input
              [id]="'cue_data_footnote_title_' + i"
              [formControl]="author"
              class="input is-small"
              [ngClass]="{ 'is-danger': author.invalid }"
              type="text"
            />
          </div>
          <p class="help is-danger" *ngIf="author.errors?.required">
            You need to specify the author.
          </p>
        </div>

        <button
          type="button"
          (click)="removeAuthor($any(array), i)"
          class="button is-small"
        >
          Remove Author
        </button>
      </div>
    </div>

    <div class="buttons">
      <button
        type="button"
        (click)="addAuthor($any(array))"
        class="button is-small is-fullwidth"
      >
        + Add Author
      </button>
    </div>
  </ng-container>
</div>
