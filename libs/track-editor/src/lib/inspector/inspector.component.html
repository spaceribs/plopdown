<section *ngIf="cueSelectedModel">
  <h3>Selected Cue</h3>
  <div class="box">
    <form
      [formGroup]="cueForm"
      (keyup.enter)="submitCue()"
      (blur)="submitCue()"
      novalidate
    >
      <div class="box">
        <h4 class="is-size-6">Cue Info</h4>
        <hr />
        <div>
          <div class="field">
            <label for="cue_id" class="label is-small">ID</label>
            <div class="control">
              <input
                id="cue_id"
                formControlName="id"
                class="input is-small"
                type="text"
              />
            </div>
          </div>
          <div class="field">
            <label for="cue_layer" class="label is-small">Layer</label>
            <div class="control">
              <div class="select is-small">
                <select
                  (change)="submitCue()"
                  id="cue_layer"
                  formControlName="layer"
                >
                  <option [ngValue]="layer.id" *ngFor="let layer of layers">
                    {{ layer.id }}
                  </option>
                </select>
              </div>
            </div>
          </div>
          <div class="field">
            <label for="cue_start_time" class="label is-small"
              >Start Time</label
            >
            <div class="control">
              <input
                id="cue_start_time"
                formControlName="startTime"
                class="input is-small"
                type="number"
                min="0"
              />
            </div>
          </div>
          <div class="field">
            <label for="cue_end_time" class="label is-small">End Time</label>
            <div class="control">
              <input
                id="cue_end_time"
                formControlName="endTime"
                class="input is-small"
                type="number"
                min="0"
              />
            </div>
          </div>
        </div>
      </div>
      <div class="box">
        <h4 class="is-size-6">Cue Type</h4>
        <hr />
        <div class="field">
          <label for="cue_template_type" class="label is-small"
            >Template Type</label
          >
          <div class="control">
            <div class="select is-small">
              <select
                (change)="submitCue()"
                [(ngModel)]="cueTemplateType"
                [ngModelOptions]="{ standalone: true }"
                id="cue_template_type"
              >
                <option
                  [ngValue]="type.value"
                  *ngFor="let type of PlopdownTemplateType | keyvalue"
                >
                  {{ type.value }}
                </option>
              </select>
            </div>
          </div>
        </div>
        <div [ngSwitch]="cueTemplateType">
          <plopdown-plop-form
            *ngSwitchCase="PlopdownTemplateType.Plop"
            (formUpdate)="submitCue()"
            [(data)]="cueData"
          ></plopdown-plop-form>
          <plopdown-info-form
            *ngSwitchCase="PlopdownTemplateType.Info"
            (formUpdate)="submitCue()"
            [(data)]="cueData"
          ></plopdown-info-form>
        </div>
      </div>
    </form>
  </div>
</section>

<section *ngIf="headerModel">
  <h3>Headers</h3>
  <div class="box">
    <form
      [formGroup]="headerForm"
      (keyup.enter)="submitHeader()"
      (blur)="submitHeader()"
      novalidate
    >
      <div class="box">
        <h4 class="is-size-6">Metadata</h4>
        <hr />
        <div>
          <div class="field">
            <label class="label is-small">ID</label>
            <div class="control">
              <input
                formControlName="_id"
                readonly
                class="input is-small"
                type="text"
              />
            </div>
          </div>
          <div class="field">
            <label class="label is-small">Revision</label>
            <div class="control">
              <input
                formControlName="_rev"
                readonly
                class="input is-small"
                type="text"
              />
            </div>
          </div>
          <div class="field">
            <label class="label is-small">Created</label>
            <div class="control">
              <input
                formControlName="created"
                readonly
                class="input is-small"
                type="text"
              />
            </div>
          </div>
          <div class="field">
            <label class="label is-small">Last Updated</label>
            <div class="control">
              <input
                formControlName="updated"
                readonly
                class="input is-small"
                type="text"
              />
            </div>
          </div>
        </div>
      </div>
      <div class="box">
        <h4 class="is-size-6">Track Info</h4>
        <hr />
        <div>
          <div class="field" *ngIf="headerForm.controls.title as control">
            <label for="header_title" class="label is-small">Track Title</label>
            <div class="control">
              <input
                id="header_title"
                [formControl]="control"
                class="input is-small"
                [ngClass]="{ 'is-danger': control.invalid }"
                type="text"
              />
            </div>
            <p class="help is-danger" *ngIf="control.errors?.required">
              A title for the track is required
            </p>
          </div>
          <div class="field" *ngIf="headerForm.controls.for as control">
            <label for="header_for" class="label is-small">For</label>
            <div class="control">
              <input
                id="header_for"
                [formControl]="control"
                class="input is-small"
                [ngClass]="{ 'is-danger': control.invalid }"
                type="text"
              />
            </div>
            <p class="help is-danger" *ngIf="control.errors?.required">
              You need to specify which video this track is for
            </p>
          </div>
          <div class="field">
            <label for="header_thumbnail" class="label is-small"
              >Thumbnail</label
            >
            <div class="control">
              <input
                formControlName="thumbnail"
                class="input is-small"
                type="text"
              />
            </div>
          </div>
          <div class="field">
            <label for="header_url" class="label is-small">Track URL</label>
            <div class="control">
              <input
                formControlName="url"
                id="header_url"
                class="input is-small"
                type="url"
              />
            </div>
          </div>
          <div class="field">
            <label for="header_language" class="label is-small">Language</label>
            <div class="control">
              <input
                formControlName="language"
                id="header_language"
                class="input is-small"
                type="url"
              />
            </div>
          </div>
          <div class="field">
            <label for="header_license" class="label is-small">License</label>
            <div class="control">
              <input
                formControlName="license"
                id="header_license"
                class="input is-small"
                type="url"
              />
            </div>
          </div>
          <div class="field">
            <label for="header_authors" class="label is-small">Author(s)</label>
            <div class="control">
              <input
                formControlName="authors"
                id="header_authors"
                class="input is-small"
                type="url"
              />
            </div>
          </div>
        </div>
      </div>
      <div class="box">
        <h4 class="is-size-6">Content Matching</h4>
        <hr />
        <div>
          <div class="field">
            <label for="header_frame_origin" class="label is-small"
              >Frame Origin</label
            >
            <div class="control">
              <input
                id="header_frame_origin"
                formControlName="frameOrigin"
                class="input is-small"
                type="text"
              />
            </div>
          </div>
          <div class="field">
            <label for="header_frame_path" class="label is-small"
              >Frame Path</label
            >
            <div class="control">
              <input
                id="header_frame_path"
                formControlName="framePath"
                class="input is-small"
                type="text"
              />
            </div>
          </div>
          <div class="field">
            <label for="header_frame_search" class="label is-small"
              >Frame Search</label
            >
            <div class="control">
              <input
                id="header_frame_search"
                formControlName="frameSearch"
                class="input is-small"
                type="text"
              />
            </div>
          </div>
          <div class="field">
            <label for="header_frame_title" class="label is-small"
              >Frame Title</label
            >
            <div class="control">
              <input
                id="header_frame_title"
                formControlName="frameTitle"
                class="input is-small"
                type="text"
              />
            </div>
          </div>
          <div class="field" *ngIf="headerForm.controls.xpath as control">
            <label for="header_frame_xpath" class="label is-small">XPath</label>
            <div class="control">
              <input
                id="header_frame_xpath"
                [formControl]="control"
                class="input is-small"
                [ngClass]="{ 'is-danger': control.invalid }"
                type="text"
              />
            </div>
            <p class="help is-danger" *ngIf="control.errors?.required">
              You need to specify an XPath selector for the location of the
              video
            </p>
          </div>
          <div class="field">
            <label for="header_frame_xpath" class="label is-small"
              >Duration</label
            >
            <div class="control">
              <input
                id="header_frame_xpath"
                formControlName="duration"
                class="input is-small"
                type="number"
                min="0"
                step="1"
              />
            </div>
          </div>
        </div>
      </div>
    </form>
  </div>
</section>
